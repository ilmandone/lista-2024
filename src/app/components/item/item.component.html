<div
	class="item-button"
	mat-ripple
	[attr.tabindex]="editing() ? -1 : 0"
	[attr.role]="!editing() ? 'button' : 'none'"
	[class.editing]="editing()"
	[matRippleDisabled]="editing()"
>
	<!--Left group-->
	<div class="item-button__left">
		@if(shopping() && extra() ) {
		<mat-icon class="shopping-icon" [fontIcon]="extraString()"></mat-icon>
		} @if (editing()) {

		<!--Checkbox-->
		<mat-checkbox
			class="item-button__left__checkbox"
			aria-label="Select this item"
			[checked]="selected()"
			(change)="itemSelected($event)"
		></mat-checkbox>
		}

		<!--  Label-->
		<app-focus-input
			[disabled]="!editing() || (disabled && data().UUID !== focusSrv.id() )"
			[key]="data().UUID"
			[value]="data().label"
			[stroked]="stroked()"
			(changed)="itemLabelChanged($event)"
		/>
	</div>

	<!--Right controls-->
	<div class="item-button__right">
		<!-- Group button -->
		<div
			class="group-dot"
			role="button"
			tabindex="0"
			[attr.aria-label]="data().groupData?.label"
			[class.editing]="editing()"
			[ngStyle]="{backgroundColor: data().groupData?.color}"
			(click)="changeGroup(data())"
			(keyup.Enter)="changeGroup(data())"
			(keyup.Space)="changeGroup(data())"
		></div>

		@if (editing()) {
		<!-- Drag handler -->
		<button cdkDragHandle mat-icon-button [title]="'Drag handler'" [disabled]="disabled">
			<mat-icon [fontIcon]="'drag_indicator'"></mat-icon>
		</button>
		}
	</div>
</div>
